#!/bin/bash

set -ex

LOG_FILE="/tmp/postinst.log"

{
  echo "[postinst] Executed on $(date)"
  echo "[postinst] No install.sh â€” performing manual setup..."


  chmod +x /usr/bin/hardn-xdr
  chmod +x /usr/lib/hardn-xdr/src/setup/hardn-main.sh


  if [ -d /usr/lib/hardn-xdr/src/setup/modules ]; then
    find /usr/lib/hardn-xdr/src/setup/modules -type f -name "*.sh" -exec chmod +x {} \;
    echo "[postinst] Module permissions set."
  else
    echo "[postinst] WARNING: Modules directory not found."
  fi

  echo "[postinst] HARDN-XDR installed successfully."
  echo "Run with: sudo hardn-xdr"
} | tee "$LOG_FILE"

exit 0