#!/bin/bash
# HARDN-XDR - Linux Security Hardening Tool
# Simplified version to fix Debian packaging issues

set -e

VERSION="1.1.161"
SCRIPT_NAME="hardn-xdr"

show_help() {
    cat << EOF
HARDN-XDR v${VERSION} - Linux Security Hardening Tool

Usage: $SCRIPT_NAME [OPTIONS]

Options:
    -h, --help       Show this help message
    -v, --version    Show version information
    --test           Run basic system checks

This is a simplified version to restore Debian packaging functionality.
EOF
}

show_version() {
    echo "$SCRIPT_NAME version $VERSION"
}

run_test() {
    echo "Running basic system checks..."
    echo "- OS: $(uname -o)"
    echo "- Kernel: $(uname -r)"
    echo "- Distribution: $(lsb_release -ds 2>/dev/null || echo "Unknown")"
    echo "- User: $(whoami)"
    echo "Test completed successfully."
}

main() {
    case "${1:-}" in
        -h|--help)
            show_help
            ;;
        -v|--version)
            show_version
            ;;
        --test)
            run_test
            ;;
        "")
            echo "HARDN-XDR v${VERSION} - Use --help for usage information"
            ;;
        *)
            echo "Unknown option: $1"
            echo "Use --help for usage information"
            exit 1
            ;;
    esac
}

main "$@"